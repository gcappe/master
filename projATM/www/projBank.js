var pas={},rtl={quiet:!1,debug_load_units:!1,debug_rtti:!1,debug:function(){!rtl.quiet&&console&&console.log&&console.log(arguments)},error:function(a){rtl.debug("Error: ",a);throw a;},warn:function(a){rtl.debug("Warn: ",a)},hasString:function(a){return rtl.isString(a)&&0<a.length},isArray:function(a){return Array.isArray(a)},isFunction:function(a){return"function"===typeof a},isModule:function(a){return rtl.isObject(a)&&rtl.hasString(a.$name)&&pas[a.$name]===a},isImplementation:function(a){return rtl.isObject(a)&&
rtl.isModule(a.$module)&&a.$module.$impl===a},isNumber:function(a){return"number"===typeof a},isObject:function(a){return"object"===typeof a&&null!=a},isString:function(a){return"string"===typeof a},getNumber:function(a){return"number"===typeof a?a:NaN},getChar:function(a){return"string"===typeof a&&1===a.length?a:""},getObject:function(a){return"object"===typeof a||"function"===typeof a?a:null},isPasClass:function(a){return rtl.isObject(a)&&a.hasOwnProperty("$classname")&&rtl.isObject(a.$module)},
isPasClassInstance:function(a){return rtl.isObject(a)&&rtl.isPasClass(a.$class)},hexStr:function(a,b){return("000000000000000"+a.toString(16).toUpperCase()).slice(-b)},m_loading:0,m_loading_intf:1,m_intf_loaded:2,m_loading_impl:3,m_initializing:4,m_initialized:5,module:function(a,b,c,d,f){rtl.debug_load_units&&rtl.debug('rtl.module name="'+a+'" intfuses='+b+" impluses="+d+" hasimplcode="+rtl.isFunction(f));rtl.hasString(a)||rtl.error('invalid module name "'+a+'"');rtl.isArray(b)||rtl.error('invalid interface useslist of "'+
a+'"');rtl.isFunction(c)||rtl.error('invalid interface code of "'+a+'"');void 0==d||rtl.isArray(d)||rtl.error('invalid implementation useslist of "'+a+'"');void 0==f||rtl.isFunction(f)||rtl.error('invalid implementation code of "'+a+'"');pas[a]&&rtl.error('module "'+a+'" is already registered');a=pas[a]={$name:a,$intfuseslist:b,$impluseslist:d,$state:rtl.m_loading,$intfcode:c,$implcode:f,$impl:null,$rtti:Object.create(rtl.tSectionRTTI)};a.$rtti.$module=a;f&&(a.$impl={$module:a,$rtti:a.$rtti})},exitcode:0,
run:function(a){function b(){rtl.hasString(a)||(a="program");rtl.debug_load_units&&rtl.debug('rtl.run module="'+a+'"');rtl.initRTTI();var b=pas[a];b||rtl.error('rtl.run module "'+a+'" missing');rtl.loadintf(b);rtl.loadimpl(b);"program"==a&&(rtl.debug_load_units&&rtl.debug("running $main"),b=pas.program.$main(),rtl.isNumber(b)&&(rtl.exitcode=b))}if(rtl.showUncaughtExceptions)try{b()}catch(d){var c=d.hasOwnProperty("$class")?d.$class.$classname:"";c+=(c?": ":"")+(d.hasOwnProperty("fMessage")?d.fMessage:
d);alert("Uncaught Exception : "+c);rtl.exitCode=216}else b();return rtl.exitcode},loadintf:function(a){a.$state>rtl.m_loading_intf||(rtl.debug_load_units&&rtl.debug('loadintf: "'+a.$name+'"'),a.$state===rtl.m_loading_intf&&rtl.error('unit cycle detected "'+a.$name+'"'),a.$state=rtl.m_loading_intf,rtl.loaduseslist(a,a.$intfuseslist,rtl.loadintf),rtl.debug_load_units&&rtl.debug('loadintf: run intf of "'+a.$name+'"'),a.$intfcode(a.$intfuseslist),a.$state=rtl.m_intf_loaded)},loaduseslist:function(a,
b,c){if(void 0!=b)for(var d in b){var f=b[d];rtl.debug_load_units&&rtl.debug('loaduseslist of "'+a.$name+'" uses="'+f+'"');void 0==pas[f]&&rtl.error('module "'+a.$name+'" misses "'+f+'"');c(pas[f])}},loadimpl:function(a){a.$state>=rtl.m_loading_impl||(a.$state<rtl.m_intf_loaded&&rtl.error('loadimpl: interface not loaded of "'+a.$name+'"'),rtl.debug_load_units&&rtl.debug('loadimpl: load uses of "'+a.$name+'"'),a.$state=rtl.m_loading_impl,rtl.loaduseslist(a,a.$impluseslist,rtl.loadintf),rtl.loaduseslist(a,
a.$intfuseslist,rtl.loadimpl),rtl.loaduseslist(a,a.$impluseslist,rtl.loadimpl),rtl.debug_load_units&&rtl.debug('loadimpl: run impl of "'+a.$name+'"'),rtl.isFunction(a.$implcode)&&a.$implcode(a.$impluseslist),rtl.debug_load_units&&rtl.debug('loadimpl: run init of "'+a.$name+'"'),a.$state=rtl.m_initializing,rtl.isFunction(a.$init)&&a.$init(),a.$state=rtl.m_initialized)},createCallback:function(a,b){var c="string"===typeof b?function(){return a[b].apply(a,arguments)}:function(){return b.apply(a,arguments)};
c.scope=a;c.fn=b;return c},cloneCallback:function(a){return rtl.createCallback(a.scope,a.fn)},eqCallback:function(a,b){return a==b?!0:null!=a&&null!=b&&a.fn&&a.scope===b.scope&&a.fn==b.fn},initClass:function(a,b,c,d){b[c]=a;a.$classname=c;b.$module&&b.$module.$impl===b&&(b=b.$module);a.$parent=b;a.$fullname=b.$name+"."+c;rtl.isModule(b)?(a.$module=b,a.$name=c):(a.$module=b.$module,a.$name=b.name+"."+c);rtl.debug_rtti&&rtl.debug("initClass "+a.$fullname);b=a.$module.$rtti.$Class(a.$name,{"class":a,
module:b});a.$rtti=b;rtl.isObject(a.$ancestor)&&(b.ancestor=a.$ancestor.$rtti);b.ancestor||(b.ancestor=null);d.call(a)},createClass:function(a,b,c,d){var f=null;null!=c?(f=Object.create(c),f.$ancestor=c):f={$create:function(a,b){void 0==b&&(b=[]);var c=Object.create(this);c.$class=this;c.$init();try{c[a].apply(c,b),c.AfterConstruction()}catch(k){throw c.$destroy,k;}return c},$destroy:function(a){this.BeforeDestruction();this[a]();this.$final}};rtl.initClass(f,a,b,d)},createClassExt:function(a,b,c,
d,f){var e=null;e=Object.create(c);e.$create=function(a,b){void 0==b&&(b=[]);var c=0<d.length?this[d](a,b):Object.create(this);c.$class=this;c.$init();try{c[a].apply(c,b),c.AfterConstruction&&c.AfterConstruction()}catch(l){throw c.$destroy,l;}return c};e.$destroy=function(a){this.BeforeDestruction&&this.BeforeDestruction();this[a]();this.$final};rtl.initClass(e,a,b,f)},tObjectDestroy:"Destroy",free:function(a,b){null!=a[b]&&(a[b].$destroy(rtl.tObjectDestroy),a[b]=null)},freeLoc:function(a){if(null!=
a)return a.$destroy(rtl.tObjectDestroy),null},is:function(a,b){return b.isPrototypeOf(a)||a===b},isExt:function(a,b,c){return null==a||"object"!==typeof b&&"function"!==typeof b?!1:a===b?1===c?!1:2===c?rtl.isPasClass(a):!0:b.isPrototypeOf&&b.isPrototypeOf(a)?1===c?rtl.isPasClassInstance(a):2===c?rtl.isPasClass(a):!0:"function"==typeof b&&a instanceof b?!0:!1},Exception:null,EInvalidCast:null,EAbstractError:null,ERangeError:null,raiseE:function(a){var b=rtl[a];if(null==b){var c=pas.SysUtils;c||(c=
pas.sysutils);c&&((b=c[a])||(b=c[a.toLowerCase()]),b||(b=c.Exception),b||(b=c.exception))}if(b){if(b.Create)throw b.$create("Create");if(b.create)throw b.$create("create");}if("EInvalidCast"===a)throw"invalid type cast";if("EAbstractError"===a)throw"Abstract method called";if("ERangeError"===a)throw"range error";throw a;},as:function(a,b){if(null===a||rtl.is(a,b))return a;rtl.raiseE("EInvalidCast")},asExt:function(a,b,c){if(null===a||rtl.isExt(a,b,c))return a;rtl.raiseE("EInvalidCast")},createInterface:function(a,
b,c,d,f,e){var g=f?Object.create(f):{};a[b]=g;g.$module=a;g.$name=b;g.$fullname=a.$name+"."+b;g.$guid=c;g.$guidr=null;g.$names=d?d:[];rtl.isFunction(e)&&(rtl.debug_rtti&&rtl.debug("createInterface "+g.$fullname),a=g.$module.$rtti.$Interface(b,{"interface":g,module:a}),g.$rtti=a,f&&(a.ancestor=f.$rtti),a.ancestor||(a.ancestor=null),e.call(g));return g},strToGUIDR:function(a,b){function c(b){var c=a.substr(d,b);d+=b;return parseInt(c,16)}var d=0;d+=1;b.D1=c(8);d+=1;b.D2=c(4);d+=1;b.D3=c(4);d+=1;b.D4||
(b.D4=[]);b.D4[0]=c(2);b.D4[1]=c(2);d+=1;for(var f=2;8>f;f++)b.D4[f]=c(2);return b},guidrToStr:function(a){if(a.$intf)return a.$intf.$guid;for(var b=rtl.hexStr,c="{"+b(a.D1,8)+"-"+b(a.D2,4)+"-"+b(a.D3,4)+"-"+b(a.D4[0],2)+b(a.D4[1],2)+"-",d=2;8>d;d++)c+=b(a.D4[d],2);return c+"}"},createTGUID:function(a){return rtl.strToGUIDR(a,new (pas.System?pas.System.TGuid:pas.system.tguid))},getIntfGUIDR:function(a){if(!a)return null;if(!a.$guidr){var b=rtl.createTGUID(a.$guid);a.hasOwnProperty("$guid")||(a=Object.getPrototypeOf(a));
b.$intf=a;a.$guidr=b}return a.$guidr},addIntf:function(a,b,c){function d(a){return"function"===typeof a?function(){return a.apply(this.$o,arguments)}:function(){rtl.raiseE("EAbstractError")}}c||(c={});var f=b,e=Object.create(f);a.$intfmaps[b.$guid]=e;do{b=f.$names;if(!b)break;for(var g=0;g<b.length;g++){var h=b[g],k=c[h];k||(k=h);e[h]=d(a[k])}f=Object.getPrototypeOf(f)}while(null!=f)},getIntfG:function(a,b,c){if(!a)return null;var d=a.$intfmaps;if(!d)return null;d=d[b];if(!d)return null;if("function"===
typeof d)return d.call(a);var f=null;a.$interfaces&&(f=a.$interfaces[b]);f||(f=Object.create(d),f.$o=a,a.$interfaces||(a.$interfaces={}),a.$interfaces[b]=f);if("object"===typeof c){var e=null;return 0===f.QueryInterface(rtl.getIntfGUIDR(c),{get:function(){return e},set:function(a){e=a}})?e:null}2===c&&"com"===f.$kind&&f._AddRef();return f},getIntfT:function(a,b){return rtl.getIntfG(a,b.$guid)},queryIntfT:function(a,b){return rtl.getIntfG(a,b.$guid,b)},queryIntfIsT:function(a,b){var c=rtl.queryIntfG(a,
b.$guid);if(!c)return!1;"com"===c.$kind&&c._Release();return!0},asIntfT:function(a,b){var c=rtl.getIntfG(a,b.$guid);if(null!==c)return c;rtl.raiseEInvalidCast()},intfIsClass:function(a,b){return null!=a&&rtl.is(a.$o,b)},intfAsClass:function(a,b){return null==a?null:rtl.as(a.$o,b)},intfToClass:function(a,b){return null!==a&&rtl.is(a.$o,b)?a.$o:null},intfRefs:{ref:function(a,b){var c=this[a];c&&(delete this[a],c._Release());return this[a]=b},free:function(){for(var a in this)this.hasOwnProperty(a)&&
this[a]._Release}},createIntfRefs:function(){return Object.create(rtl.intfRefs)},setIntfP:function(a,b,c,d){var f=a[b];f!==c&&(null!==f&&(a[b]=null,f._Release()),null!==c&&(d||c._AddRef(),a[b]=c))},setIntfL:function(a,b,c){a!==b?(null!==b&&(c||b._AddRef()),null!==a&&a._Release()):c&&null!==a&&a._Release();return b},_AddRef:function(a){a&&a._AddRef();return a},_Release:function(a){a&&a._Release();return a},checkMethodCall:function(a,b){rtl.isObject(a)&&rtl.is(a,b)||rtl.raiseE("EInvalidCast")},rc:function(a,
b,c){if(Math.floor(a)===a&&a>=b&&a<=c)return a;rtl.raiseE("ERangeError")},rcc:function(a,b,c){if("string"===typeof a&&1===a.length){var d=a.charCodeAt(0);if(d>=b&&d<=c)return a}rtl.raiseE("ERangeError")},rcSetCharAt:function(a,b,c){("string"!==typeof a||0>b||b>=a.length)&&rtl.raiseE("ERangeError");return rtl.setCharAt(a,b,c)},rcCharAt:function(a,b){("string"!==typeof a||0>b||b>=a.length)&&rtl.raiseE("ERangeError");return a.charAt(b)},rcArrR:function(a,b){if(Array.isArray(a)&&"number"===typeof b&&
0<=b&&b<a.length){if(2<arguments.length){a=a[b];for(var c=2;c<arguments.length;c++)a=rtl.rcArrR(a,arguments[c]);return a}return a[b]}rtl.raiseE("ERangeError")},rcArrW:function(a,b,c){for(var d=3;d<arguments.length;d++)a=rtl.rcArrR(a,b),b=arguments[d-1],c=arguments[d];if(Array.isArray(a)&&"number"===typeof b&&0<=b&&b<a.length)return a[b]=c;rtl.raiseE("ERangeError")},length:function(a){return null==a?0:a.length},arraySetLength:function(a,b,c){function d(a,g){var e=a.length,k=f[g];if(e!==c)if(a.length=
c,g===f.length-1)if(rtl.isArray(b))for(;e<k;e++)a[e]=[];else if(rtl.isFunction(b))for(;e<k;e++)a[e]=new b;else if(rtl.isObject(b))for(;e<k;e++)a[e]={};else for(;e<k;e++)a[e]=b;else for(;e<k;e++)a[e]=[];if(g<f.length-1)for(e=0;e<k;e++)a[e]=d(a[e],g+1);return a}null==a&&(a=[]);var f=arguments;return d(a,2)},arrayEq:function(a,b){if(null===a)return null===b;if(null===b||a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},arrayClone:function(a,b,c,d,f,e){if(rtl.isFunction(a))for(;c<
d;c++)f[e++]=new a(b[c]);else if("string"===typeof a&&"refSet"===a)for(;c<d;c++)f[e++]=rtl.refSet(b[c]);else for(;c<d;c++)f[e++]=b[c]},arrayConcat:function(a){for(var b=[],c=0,d=1;d<arguments.length;d++)c+=arguments[d].length;b.length=c;c=0;for(d=1;d<arguments.length;d++){var f=arguments[d];null!=f&&(rtl.arrayClone(a,f,0,f.length,b,c),c+=f.length)}return b},arrayCopy:function(a,b,c,d){if(null==b)return[];0>c&&(c=0);void 0===d&&(d=b.length);d=c+d;d>b.length&&(d=b.length);if(c>=d)return[];if(0===a)return b.slice(c,
d);var f=[];f.length=d-c;rtl.arrayClone(a,b,c,d,f,0);return f},setCharAt:function(a,b,c){return a.substr(0,b)+c+a.substr(b+1)},getResStr:function(a,b){var c=a.$resourcestrings[b];return c.current?c.current:c.org},createSet:function(){for(var a={},b=0;b<arguments.length;b++)if(null!=arguments[b])a[arguments[b]]=!0;else for(var c=arguments[b+=1],d=arguments[b+=1];c<=d;c++)a[c]=!0;return a},cloneSet:function(a){var b={},c;for(c in a)b[c]=!0;return b},refSet:function(a){a.$shared=!0;return a},includeSet:function(a,
b){a.$shared&&(a=rtl.cloneSet(a));a[b]=!0;return a},excludeSet:function(a,b){a.$shared&&(a=rtl.cloneSet(a));delete a[b];return a},diffSet:function(a,b){var c={},d;for(d in a)b[d]||(c[d]=!0);delete c.$shared;return c},unionSet:function(a,b){var c={},d;for(d in a)c[d]=!0;for(d in b)c[d]=!0;delete c.$shared;return c},intersectSet:function(a,b){var c={},d;for(d in a)b[d]&&(c[d]=!0);delete c.$shared;return c},symDiffSet:function(a,b){var c={},d;for(d in a)b[d]||(c[d]=!0);for(d in b)a[d]||(c[d]=!0);delete c.$shared;
return c},eqSet:function(a,b){for(var c in a)if(!b[c]&&"$shared"!=c)return!1;for(c in b)if(!a[c]&&"$shared"!=c)return!1;return!0},neSet:function(a,b){return!rtl.eqSet(a,b)},leSet:function(a,b){for(var c in a)if(!b[c]&&"$shared"!=c)return!1;return!0},geSet:function(a,b){for(var c in b)if(!a[c]&&"$shared"!=c)return!1;return!0},strSetLength:function(a,b){var c=a.length;if(c>b)return a.substring(0,b);if(a.repeat)return a+" ".repeat(b-c);for(;c<b;)a+=" ",c++;return a},spaceLeft:function(a,b){var c=a.length;
if(c>=b)return a;if(a.repeat)return" ".repeat(b-c)+a;for(;c<b;)a=" "+a,c++},floatToStr:function(a,b,c){if(2<arguments.length)return rtl.spaceLeft(a.toFixed(c),b);var d="",f=Math.abs(a);1E10>f?d="00":1E100>f&&(d="0");2>arguments.length?b=9:9>b&&(b=9);f=(0<a?" ":"")+a.toExponential(b-8);f=f.replace(/e(.)/,"E$1"+d);return rtl.spaceLeft(f,b)},initRTTI:function(){function a(a,b,c){c||(c=rtl.tTypeInfo);rtl.debug_rtti&&rtl.debug('initRTTI.newBaseTI "'+a+'" '+b+' ("'+c.name+'")');c=Object.create(c);c.name=
a;c.kind=b;return rtl[a]=c}function b(b,c,d,h){b=a(b,1,rtl.tTypeInfoInteger);b.minvalue=c;b.maxvalue=d;b.ordtype=h;return b}function c(a,b){var c=Object.create(rtl.tTypeMember);c.name=a;c.kind=b;rtl[a]=c}rtl.debug_rtti&&rtl.debug("initRTTI");rtl.tTypeInfo={name:"tTypeInfo"};a("tTypeInfoInteger",1);b("shortint",-128,127,0);b("byte",0,255,1);b("smallint",-32768,32767,2);b("word",0,65535,3);b("longint",-2147483648,2147483647,4);b("longword",0,4294967295,5);b("nativeint",-4503599627370496,0xfffffffffffff,
6);b("nativeuint",0,0xfffffffffffff,7);a("char",2);a("string",3);a("tTypeInfoEnum",4,rtl.tTypeInfoInteger);a("tTypeInfoSet",5);a("double",6);a("boolean",7);a("tTypeInfoProcVar",8);a("tTypeInfoMethodVar",9,rtl.tTypeInfoProcVar);a("tTypeInfoArray",10);a("tTypeInfoDynArray",11);a("tTypeInfoPointer",15);a("pointer",15,rtl.tTypeInfoPointer).reftype=null;a("jsvalue",16);a("tTypeInfoRefToProcVar",17,rtl.tTypeInfoProcVar);rtl.tTypeMember={};c("tTypeMemberField",1);c("tTypeMemberMethod",2);c("tTypeMemberProperty",
3);rtl.tTypeMembers={};var d=a("tTypeInfoStruct",0);d.$addMember=function(a,b,c){if(rtl.debug_rtti){if(!rtl.hasString(a)||"$"===a.charAt())throw'invalid member "'+a+'", this="'+this.name+'"';if(!rtl.is(b,rtl.tTypeMember))throw'invalid ancestor "'+b+":"+b.name+'", "'+this.name+"."+a+'"';if(void 0!=c&&"object"!=typeof c)throw'invalid options "'+c+'", "'+this.name+"."+a+'"';}b=Object.create(b);b.name=a;this.members[a]=b;this.names.push(a);if(rtl.isObject(c))for(var d in c)c.hasOwnProperty(d)&&(b[d]=
c[d]);return b};d.addField=function(a,b,c){c=this.$addMember(a,rtl.tTypeMemberField,c);if(rtl.debug_rtti&&!rtl.is(b,rtl.tTypeInfo))throw'invalid type "'+b+'", "'+this.name+"."+a+'"';c.typeinfo=b;this.fields.push(a);return c};d.addFields=function(){for(var a=0;a<arguments.length;){var b=arguments[a++],c=arguments[a++];a<arguments.length&&"object"===typeof arguments[a]?this.addField(b,c,arguments[a++]):this.addField(b,c)}};d.addMethod=function(a,b,c,d,k){k=this.$addMember(a,rtl.tTypeMemberMethod,k);
k.methodkind=b;k.procsig=rtl.newTIProcSig(c);k.procsig.resulttype=d?d:null;this.methods.push(a);return k};d.addProperty=function(a,b,c,d,k,l){l=this.$addMember(a,rtl.tTypeMemberProperty,l);l.flags=b;l.typeinfo=c;l.getter=d;l.setter=k;rtl.isArray(l.params)&&(l.params=rtl.newTIParams(l.params));this.properties.push(a);rtl.isString(l.stored)||(l.stored="");return l};d.getField=function(a){return this.members[this.fields[a]]};d.getMethod=function(a){return this.members[this.methods[a]]};d.getProperty=
function(a){return this.members[this.properties[a]]};a("tTypeInfoRecord",12,rtl.tTypeInfoStruct);a("tTypeInfoClass",13,rtl.tTypeInfoStruct);a("tTypeInfoClassRef",14);a("tTypeInfoInterface",15,rtl.tTypeInfoStruct)},tSectionRTTI:{$module:null,$inherited:function(a,b,c){rtl.debug_rtti&&rtl.debug('tSectionRTTI.newTI "'+(this.$module?this.$module.$name:"(no module)")+'"."'+a+'" ('+b.name+") "+(c?"init":"forward"));var d=this[a];if(d){if(!d.$forward)throw'duplicate type "'+a+'"';if(!b.isPrototypeOf(d))throw'typeinfo ancestor mismatch "'+
a+'" ancestor="'+b.name+'" t.name="'+d.name+'"';}else d=Object.create(b),d.name=a,d.module=this.module,this[a]=d;if(c){delete d.$forward;for(var f in c)c.hasOwnProperty(f)&&(d[f]=c[f])}else d.$forward=!0;return d},$Scope:function(a,b,c){a=this.$inherited(a,b,c);a.members={};a.names=[];a.fields=[];a.methods=[];a.properties=[];return a},$TI:function(a,b,c){a=this.$inherited(a,rtl.tTypeInfo,c);a.kind=b;return a},$Int:function(a,b){return this.$inherited(a,rtl.tTypeInfoInteger,b)},$Enum:function(a,b){return this.$inherited(a,
rtl.tTypeInfoEnum,b)},$Set:function(a,b){return this.$inherited(a,rtl.tTypeInfoSet,b)},$StaticArray:function(a,b){return this.$inherited(a,rtl.tTypeInfoArray,b)},$DynArray:function(a,b){return this.$inherited(a,rtl.tTypeInfoDynArray,b)},$ProcVar:function(a,b){return this.$inherited(a,rtl.tTypeInfoProcVar,b)},$RefToProcVar:function(a,b){return this.$inherited(a,rtl.tTypeInfoRefToProcVar,b)},$MethodVar:function(a,b){return this.$inherited(a,rtl.tTypeInfoMethodVar,b)},$Record:function(a,b){return this.$Scope(a,
rtl.tTypeInfoRecord,b)},$Class:function(a,b){return this.$Scope(a,rtl.tTypeInfoClass,b)},$ClassRef:function(a,b){return this.$inherited(a,rtl.tTypeInfoClassRef,b)},$Pointer:function(a,b){return this.$inherited(a,rtl.tTypeInfoPointer,b)},$Interface:function(a,b){return this.$Scope(a,rtl.tTypeInfoInterface,b)}},newTIParam:function(a){return{name:a[0],typeinfo:a[1],flags:rtl.isNumber(a[2])?a[2]:0}},newTIParams:function(a){var b=[];if(rtl.isArray(a))for(var c=0;c<a.length;c++)b.push(rtl.newTIParam(a[c]));
return b},newTIProcSig:function(a,b,c){return{params:rtl.newTIParams(a),resulttype:b,flags:c}}};
rtl.module("System",[],function(){var a=this,b=a.$impl;rtl.createClass(a,"TObject",null,function(){this.$init=function(){};this.$final=function(){};this.Create=function(){};this.Destroy=function(){};this.Free=function(){this.$destroy("Destroy")};this.AfterConstruction=function(){};this.BeforeDestruction=function(){}});this.Trunc=function(b){Math.trunc||(Math.trunc=function(a){a=+a;return isFinite(a)?a-a%1||(0>a?-0:0===a?a:0):a});a.Trunc=Math.trunc;return Math.trunc(b)};this.Int=function(a){return Math.trunc(a)};
this.Copy=function(a,b,f){1>b&&(b=1);return 0<f?a.substring(b-1,b+f-1):""};this.Copy$1=function(a,b){1>b&&(b=1);return a.substr(b-1)};this.Delete=function(b,d,f){if(!(1>d||d>b.get().length||0>=f)){var c=b.get();b.set(a.Copy(c,1,d-1)+a.Copy$1(c,d+f))}};this.Pos=function(a,b){return b.indexOf(a)+1};this.Insert=function(b,d,f){if(""!==b){var c=d.get();1>f?d.set(b+c):f>c.length?d.set(c+b):d.set(a.Copy(c,1,f-1)+b+a.Copy(c,f,c.length))}};this.upcase=function(a){return a.toUpperCase()};this.val=function(b,
d,f){f.set(0);b=Number(b);isNaN(b)||b!==a.Int(b)?f.set(1):d.set(a.Trunc(b))};this.StringOfChar=function(a,b){var c="";for(var d=1;d<=b;d++)c+=a;return c};this.Writeln=function(){var a;var d=rtl.length(arguments)-1;if(null!=b.WriteCallBack)for(a=0;a<=d;a++){var f=a;b.WriteCallBack(arguments[f],f===d)}else{a=b.WriteBuf;for(var e=0;e<=d;e++)f=e,a+=""+arguments[f];console.log(a);b.WriteBuf=""}};a.$init=function(){rtl.exitcode=0}},null,function(){var a=this.$impl;a.WriteBuf="";a.WriteCallBack=null});
rtl.module("Types",["System"],function(){});
rtl.module("JS",["System","Types"],function(){var a=this;this.isInteger=function(a){return Math.floor(a)===a};this.isNull=function(a){return null===a};this.TJSValueType={0:"jvtNull",jvtNull:0,1:"jvtBoolean",jvtBoolean:1,2:"jvtInteger",jvtInteger:2,3:"jvtFloat",jvtFloat:3,4:"jvtString",jvtString:4,5:"jvtObject",jvtObject:5,6:"jvtArray",jvtArray:6};this.GetValueType=function(b){var c=0;if(a.isNull(b))c=a.TJSValueType.jvtNull;else{var d=typeof b;"string"===d?c=a.TJSValueType.jvtString:"boolean"===d?
c=a.TJSValueType.jvtBoolean:"object"===d?c=rtl.isArray(b)?a.TJSValueType.jvtArray:a.TJSValueType.jvtObject:"number"===d&&(c=a.isInteger(b)?a.TJSValueType.jvtInteger:a.TJSValueType.jvtFloat)}return c}});rtl.module("RTLConsts",["System"],function(){this.SArgumentMissing='Missing argument in format "%s"';this.SInvalidFormat='Invalid format specifier : "%s"';this.SInvalidArgIndex='Invalid argument index in format: "%s"';this.SErrInvalidFloat='Invalid floating-point value: "%s"'});
rtl.module("SysUtils",["System","RTLConsts","JS"],function(){var a=this,b=a.$impl;rtl.createClass(a,"Exception",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this);this.fMessage=""};this.CreateFmt=function(b,d){this.fMessage=a.Format(b,d)}});rtl.createClass(a,"EConvertError",a.Exception,function(){});this.TrimLeft=function(a){return a.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,"")};this.Format=function(c,d){function f(){function a(){var a=0,f=0;if(-1===e){for(k=h;h<=u&&
"9">=c.charAt(h-1)&&"0"<=c.charAt(h-1);)h+=1;h>u&&b.DoFormatError(1,c);"*"===c.charAt(h-1)?(-1===n?f=l:(f=n,n+=1),(h>k||f>rtl.length(d)-1)&&b.DoFormatError(1,c),l=f+1,rtl.isNumber(d[f])&&pas.JS.isInteger(d[f])?e=Math.floor(d[f]):b.DoFormatError(1,c),h+=1):k<h?(pas.System.val(pas.System.Copy(c,k,h-k),{get:function(){return e},set:function(a){e=a}},{get:function(){return a},set:function(b){a=b}}),0<a&&b.DoFormatError(1,c)):e=-1}}var f="",e=0;e=q=t=n=-1;h+=1;if("%"===c.charAt(h-1))return"%";":"!==c.charAt(h-
1)?a():e=0;":"===c.charAt(h-1)&&(-1===e&&b.DoFormatError(2,c),n=e,e=-1,h+=1);"-"===c.charAt(h-1)?(v=!0,h+=1):v=!1;a();-1!==e&&(t=e,e=-1);"."===c.charAt(h-1)&&(h+=1,a(),-1===e&&(e=0),q=e);return f=pas.System.upcase(c.charAt(h-1))}function e(a,f){r=-1===n?l:n;l=r+1;return r>rtl.length(d)-1||pas.JS.GetValueType(d[r])!==a?(f&&b.DoFormatError(3,c),--l,!1):!0}var g="",h=0,k=0,l=0,r=0,u=0,p="",m="",n=0,t=0,q=0,v=!1;p="";p=0;g="";u=c.length;k=h=1;for(l=0;h<=u;){for(;h<=u&&"%"!==c.charAt(h-1);)h+=1;h>k&&(g+=
pas.System.Copy(c,k,h-k));if(h<u){p=f();if("D"===p)e(pas.JS.TJSValueType.jvtInteger,!0),m=a.IntToStr(Math.floor(d[r])),t=Math.abs(t),n=q-m.length,"-"!==m.charAt(0)?m=pas.System.StringOfChar("0",n)+m:pas.System.Insert(pas.System.StringOfChar("0",n+1),{get:function(){return m},set:function(a){m=a}},2);else if("U"===p)e(pas.JS.TJSValueType.jvtInteger,!0),0>Math.floor(d[r])&&b.DoFormatError(3,c),m=a.IntToStr(Math.floor(d[r])),t=Math.abs(t),n=q-m.length,m=pas.System.StringOfChar("0",n)+m;else if("E"===
p){if(e(pas.JS.TJSValueType.jvtFloat,!1)||e(pas.JS.TJSValueType.jvtInteger,!0))m=a.FloatToStrF(rtl.getNumber(d[r]),a.TFloatFormat.ffFixed,9999,q)}else if("F"===p){if(e(pas.JS.TJSValueType.jvtFloat,!1)||e(pas.JS.TJSValueType.jvtInteger,!0))m=a.FloatToStrF(rtl.getNumber(d[r]),a.TFloatFormat.ffFixed,9999,q)}else if("G"===p){if(e(pas.JS.TJSValueType.jvtFloat,!1)||e(pas.JS.TJSValueType.jvtInteger,!0))m=a.FloatToStrF(rtl.getNumber(d[r]),a.TFloatFormat.ffGeneral,q,3)}else if("N"===p){if(e(pas.JS.TJSValueType.jvtFloat,
!1)||e(pas.JS.TJSValueType.jvtInteger,!0))m=a.FloatToStrF(rtl.getNumber(d[r]),a.TFloatFormat.ffNumber,9999,q)}else if("M"===p){if(e(pas.JS.TJSValueType.jvtFloat,!1)||e(pas.JS.TJSValueType.jvtInteger,!0))m=a.FloatToStrF(rtl.getNumber(d[r]),a.TFloatFormat.ffCurrency,9999,q)}else if("S"===p)e(pas.JS.TJSValueType.jvtString,!0),p=""+d[r],n=p.length,-1!==q&&n>q&&(n=q),m=pas.System.Copy(p,1,n);else if("P"===p)e(pas.JS.TJSValueType.jvtInteger,!0),m=a.IntToHex(Math.floor(d[r]),31);else if("X"===p)if(e(pas.JS.TJSValueType.jvtInteger,
!0),p=Math.floor(d[r]),n=31,q>n)m=a.IntToHex(p,n);else{for(n=1;1<<4*n<=p&&16>n;)n+=1;n>q&&(q=n);m=a.IntToHex(p,q)}else"%"===p&&(m="%");-1!==t&&m.length<t&&(m=v?m+pas.System.StringOfChar(" ",t-m.length):pas.System.StringOfChar(" ",t-m.length)+m);g+=m}k=h+=1}return g};this.TStringReplaceFlag={0:"rfReplaceAll",rfReplaceAll:0,1:"rfIgnoreCase",rfIgnoreCase:1};this.StringReplace=function(c,d,f,e){var g="";a.TStringReplaceFlag.rfReplaceAll in e&&(g="g");a.TStringReplaceFlag.rfIgnoreCase in e&&(g+="i");d=
d.replace(new RegExp(b.RESpecials,"g"),"\\$1");return c.replace(new RegExp(d,g),f)};this.IntToStr=function(a){return""+a};this.IntToHex=function(a,b){var c;0===b&&(b=1);for(c="";0<a;)c="0123456789ABCDEF".charAt((a&15)+1-1)+c,a>>>=4;for(;c.length<b;)c="0"+c;return c};this.TFloatFormat={0:"ffFixed",ffFixed:0,1:"ffGeneral",ffGeneral:1,2:"ffExponent",ffExponent:2,3:"ffNumber",ffNumber:3,4:"ffCurrency",ffCurrency:4};this.FloatToStr=function(b){return a.FloatToStrF(b,a.TFloatFormat.ffGeneral,15,0)};this.FloatToStrF=
function(c,d,f,e){var g="",h="";h=a.DecimalSeparator;d===a.TFloatFormat.ffGeneral?g=b.FormatGeneralFloat(c,f,h):d===a.TFloatFormat.ffExponent?g=b.FormatExponentFloat(c,f,e,h):d===a.TFloatFormat.ffFixed?g=b.FormatFixedFloat(c,e,h):d===a.TFloatFormat.ffNumber?g=b.FormatNumberFloat(c,e,h,a.ThousandSeparator):d===a.TFloatFormat.ffCurrency&&(g=b.FormatNumberCurrency(1E4*c,e,h,a.ThousandSeparator));d!==a.TFloatFormat.ffCurrency&&1<g.length&&"-"===g.charAt(0)&&b.RemoveLeadingNegativeSign({get:function(){return g},
set:function(a){g=a}},h);return g};this.TryStrToFloat=function(b,d){var c=b;""!==a.ThousandSeparator&&(c=a.StringReplace(c,a.ThousandSeparator,"",rtl.createSet(a.TStringReplaceFlag.rfReplaceAll)));"."!==a.DecimalSeparator&&(c=a.StringReplace(c,a.DecimalSeparator,".",{}));var e=parseFloat(c);(c=!isNaN(e))&&d.set(rtl.getNumber(e));return c};this.StrToFloat=function(b){var c=0;if(!a.TryStrToFloat(b,{get:function(){return c},set:function(a){c=a}}))throw a.EConvertError.$create("CreateFmt",[pas.RTLConsts.SErrInvalidFloat,
[b]]);return c};this.DecimalSeparator=".";this.ThousandSeparator="";this.HoursPerDay=24;this.SecsPerMin=this.MinsPerHour=60;this.MSecsPerSec=1E3;this.MinsPerDay=1440;this.SecsPerDay=86400;this.MSecsPerDay=864E5;this.MonthDays=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];rtl.createClass(a,"TFormatSettings",pas.System.TObject,function(){this.GetThousandSeparator=function(){return a.ThousandSeparator}});this.FormatSettings=null;this.JSDateToDateTime=function(b){return a.EncodeDate(b.getFullYear(),
b.getMonth()+1,b.getDate())+a.EncodeTime(b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds())};this.TryEncodeDate=function(b,d,f,e){var c;if(c=0<b&&1E4>b&&1<=d&&12>=d&&0<f&&f<=a.MonthDays[+a.IsLeapYear(b)][d-1]){2<d?d-=3:(d+=9,--b);var h=Math.floor(b/100);e.set((146097*h>>>2)+(1461*(b-100*h)>>>2)+Math.floor((153*d+2)/5)+f);e.set(e.get()-693900)}return c};this.TryEncodeTime=function(a,b,f,e,g){var c;(c=24>a&&60>b&&60>f&&1E3>e)&&g.set((36E5*a+6E4*b+1E3*f+e)/864E5);return c};this.EncodeDate=
function(b,d,f){var c=0;if(!a.TryEncodeDate(b,d,f,{get:function(){return c},set:function(a){c=a}}))throw a.EConvertError.$create("CreateFmt",["%s-%s-%s is not a valid date specification",[a.IntToStr(b),a.IntToStr(d),a.IntToStr(f)]]);return c};this.EncodeTime=function(b,d,f,e){var c=0;if(!a.TryEncodeTime(b,d,f,e,{get:function(){return c},set:function(a){c=a}}))throw a.EConvertError.$create("CreateFmt",["%s:%s:%s.%s is not a valid time specification",[a.IntToStr(b),a.IntToStr(d),a.IntToStr(f),a.IntToStr(e)]]);
return c};this.Now=function(){return a.JSDateToDateTime(new Date)};this.IsLeapYear=function(a){return 0===a%4&&(0!==a%100||0===a%400)};this.NegCurrFormat=this.CurrencyFormat=0;this.CurrencyDecimals=2;this.CurrencyString="$";a.$init=function(){a.FormatSettings=a.TFormatSettings.$create("Create")}},null,function(){var a=this,b=a.$impl;b.feInvalidFormat=1;b.feMissingArgument=2;b.feInvalidArgIndex=3;b.DoFormatError=function(b,d){if(1===b)throw a.EConvertError.$create("CreateFmt",[pas.RTLConsts.SInvalidFormat,
[d]]);if(2===b)throw a.EConvertError.$create("CreateFmt",[pas.RTLConsts.SArgumentMissing,[d]]);if(3===b)throw a.EConvertError.$create("CreateFmt",[pas.RTLConsts.SInvalidArgIndex,[d]]);};b.maxdigits=15;b.ReplaceDecimalSep=function(a,b){var c=pas.System.Pos(".",a);return 0<c?pas.System.Copy(a,1,c-1)+b+pas.System.Copy(a,c+1,a.length-c):a};b.FormatGeneralFloat=function(c,d,f){var e="",g=0,h=0,k=0,l=0;if(-1===d||15<d)d=15;e=rtl.floatToStr(c,d+7);e=a.TrimLeft(e);g=pas.System.Pos(".",e);if(0===g)return e;
h=pas.System.Pos("E",e);if(0===h)return e=b.ReplaceDecimalSep(e,f);k=h+2;for(l=0;k<=e.length;)l=10*l+e.charCodeAt(k-1)-"0".charCodeAt(),k+=1;"-"===e.charAt(h+1-1)&&(l=-l);if(g+l<h&&-6<l){e=rtl.strSetLength(e,h-1);if(0<=l){c=0;for(--l;c<=l;c++)k=c,e=rtl.setCharAt(e,g-1,e.charAt(g+1-1)),g+=1;e=rtl.setCharAt(e,g-1,".");g=1;for("-"===e.charAt(g-1)&&(g+=1);"0"===e.charAt(g-1)&&g<e.length&&pas.System.Copy(e,g+1,f.length)!==f;)pas.System.Delete({get:function(){return e},set:function(a){e=a}},g,1)}else pas.System.Insert(pas.System.Copy("00000",
1,-l),{get:function(){return e},set:function(a){e=a}},g-1),e=rtl.setCharAt(e,g-l-1,e.charAt(g-l-1-1)),e=rtl.setCharAt(e,g-1,"."),-1!==l&&(e=rtl.setCharAt(e,g-l-1-1,"0"));for(k=e.length;0<k&&"0"===e.charAt(k-1);)--k;"."===e.charAt(k-1)&&--k;e=0===k||1===k&&"-"===e.charAt(0)?"0":rtl.strSetLength(e,k)}else{for(;"0"===e.charAt(h-1-1);)pas.System.Delete({get:function(){return e},set:function(a){e=a}},h-1,1),--h;e.charAt(h-1-1)===f&&(pas.System.Delete({get:function(){return e},set:function(a){e=a}},h-1,
1),--h);for("+"===e.charAt(h+1-1)?pas.System.Delete({get:function(){return e},set:function(a){e=a}},h+1,1):h+=1;"0"===e.charAt(h+1-1);)pas.System.Delete({get:function(){return e},set:function(a){e=a}},h+1,1)}return e=b.ReplaceDecimalSep(e,f)};b.FormatExponentFloat=function(c,d,f,e){var g="",h=0;e=a.DecimalSeparator;if(-1===d||15<d)d=15;for(g=rtl.floatToStr(c,d+7);" "===g.charAt(0);)pas.System.Delete({get:function(){return g},set:function(a){g=a}},1,1);h=pas.System.Pos("E",g);if(0===h)return g=b.ReplaceDecimalSep(g,
e);h+=2;4<f&&(f=4);f=g.length-h-f+1;if(0>f)pas.System.Insert(pas.System.Copy("0000",1,-f),{get:function(){return g},set:function(a){g=a}},h);else for(;0<f&&"0"===g.charAt(h-1);){pas.System.Delete({get:function(){return g},set:function(a){g=a}},h,1);if(h>g.length){pas.System.Delete({get:function(){return g},set:function(a){g=a}},h-2,2);break}--f}return g=b.ReplaceDecimalSep(g,e)};b.FormatFixedFloat=function(a,d,f){var c="";-1===d?d=2:18<d&&(d=18);c=rtl.floatToStr(a,0,d);""!==c&&" "===c.charAt(0)&&
pas.System.Delete({get:function(){return c},set:function(a){c=a}},1,1);return c=b.ReplaceDecimalSep(c,f)};b.FormatNumberFloat=function(a,d,f,e){var c="",h=0;-1===d?d=2:15<d&&(d=15);c=rtl.floatToStr(a,0,d);""!==c&&" "===c.charAt(0)&&pas.System.Delete({get:function(){return c},set:function(a){c=a}},1,1);h=pas.System.Pos(".",c);c=b.ReplaceDecimalSep(c,f);h-=3;if(""!==e&&"\x00"!==e)for(;1<h;)"-"!==c.charAt(h-1-1)&&pas.System.Insert(e,{get:function(){return c},set:function(a){c=a}},h),h-=3;return c};b.RemoveLeadingNegativeSign=
function(b,d){var c=!1;var e=a.ThousandSeparator;for(var g=2,h=b.get().length;g<=h&&(c=g,c=b.get().charCodeAt(c-1)in rtl.createSet(48,d.charCodeAt(),69,43)||b.get()===e,c);g++);c&&pas.System.Delete(b,1,1);return c};b.FormatNumberCurrency=function(c,d,f,e){var g="";e=!1;var h=0;-1===d?d=a.CurrencyDecimals:18<d&&(d=18);g=rtl.spaceLeft(""+c,0);(e="-"===g.charAt(0))&&pas.System.Delete({get:function(){return g},set:function(a){g=a}},1,1);h=pas.System.Pos(".",g);0!==h?g=b.ReplaceDecimalSep(g,f):h=g.length+
1;for(h-=3;1<h;)"\x00"!==a.ThousandSeparator&&pas.System.Insert(a.FormatSettings.GetThousandSeparator(),{get:function(){return g},set:function(a){g=a}},h),h-=3;1<g.length&&e&&(e=!b.RemoveLeadingNegativeSign({get:function(){return g},set:function(a){g=a}},f));e?(c=a.NegCurrFormat,0===c?g="("+a.CurrencyString+g+")":1===c?g="-"+a.CurrencyString+g:2===c?g=a.CurrencyString+"-"+g:3===c?g=a.CurrencyString+g+"-":4===c?g="("+g+a.CurrencyString+")":5===c?g="-"+g+a.CurrencyString:6===c?g=g+"-"+a.CurrencyString:
7===c?g=g+a.CurrencyString+"-":8===c?g="-"+g+" "+a.CurrencyString:9===c?g="-"+a.CurrencyString+" "+g:10===c?g=g+" "+a.CurrencyString+"-":11===c?g=a.CurrencyString+" "+g+"-":12===c?g=a.CurrencyString+" -"+g:13===c?g=g+"- "+a.CurrencyString:14===c?g="("+a.CurrencyString+" "+g+")":15===c&&(g="("+g+" "+a.CurrencyString+")")):(c=a.CurrencyFormat,0===c?g=a.CurrencyString+g:1===c?g+=a.CurrencyString:2===c?g=a.CurrencyString+" "+g:3===c&&(g=g+" "+a.CurrencyString));return g};b.RESpecials="([\\[\\]\\(\\)\\\\\\.\\*])"});
rtl.module("Classes",["System","RTLConsts","Types","SysUtils"],function(){var a=this.$impl;this.$init=function(){a.ClassList=Object.create(null)}},["JS"],function(){this.$impl.ClassList=null});rtl.module("Web",["System","Types","JS"],function(){});rtl.module("uPromises",["System","JS","Web"],function(){this.delay=function(a){var b=null;return b=new Promise(function(b,d){window.setTimeout(b,a)})}});
rtl.module("uAccount",["System","Classes","SysUtils","Types","Web"],function(){var a=this;rtl.createClass(a,"EWithdrawError",pas.SysUtils.Exception,function(){this.$init=function(){pas.SysUtils.Exception.$init.call(this);this.Fcurrent_balance=0};this._get_current_balance=function(){return this.Fcurrent_balance};this.Create$2=function(a){this.Fcurrent_balance=a;window.console.log("current_balance: "+pas.SysUtils.FloatToStr(a))};this.$rtti.addProperty("Saldo",1,rtl["double"],"_get_current_balance",
"")});rtl.createClass(a,"TAccount",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this);this._State=null;this._AccountNumber=0;this._ClientName=""};this.$final=function(){this._State=void 0;pas.System.TObject.$final.call(this)};this.CheckStatus=function(){if(null===this._State)this._State=a.TDefaultProfitAcc.$create("Create$1",[this]);else{var b=null;this._State._balanceAmount<this._State._LimInf&&(a.TDefaultProfitAcc.isPrototypeOf(this._State)&&(b=a.TLowProfitAcc.$create("Create$1",
[this])),a.TGoldProfitAcc.isPrototypeOf(this._State)&&(b=a.TDefaultProfitAcc.$create("Create$1",[this])));this._State._balanceAmount>this._State._LimSup&&(a.TDefaultProfitAcc.isPrototypeOf(this._State)&&(b=a.TGoldProfitAcc.$create("Create$1",[this])),a.TGoldProfitAcc.isPrototypeOf(this._State)&&(b=a.TDefaultProfitAcc.$create("Create$1",[this])),a.TLowProfitAcc.isPrototypeOf(this._State)&&(b=a.TDefaultProfitAcc.$create("Create$1",[this])));null!==b&&(b.CopyFrom(this._State),rtl.free(this,"_State"),
this._State=b)}};this.Create$1=function(a){this._State=null;this._AccountNumber=pas.System.Trunc(100*pas.SysUtils.Now());this._ClientName=a;this.CheckStatus()};this.Destroy=function(){pas.System.TObject.Destroy.apply(this,arguments)};this.Deposit=function(a){this._State.Deposit(a);this.CheckStatus()};this.Withdrawal=function(a){this._State.Withdrawal(a);this.CheckStatus()};this.ApplyReturnRate=function(){this._State.ApplyReturnRate();this.CheckStatus()};this.setBalance=function(a){this._State._balanceAmount=
a};this.getBalance=function(){return this._State._balanceAmount};this.getAccountState=function(){return this._State}});rtl.createClass(a,"TAccountState",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this);this._LimSup=this._LimInf=this._returnRate=this._balanceAmount=0;this._Account=null};this.$final=function(){this._Account=void 0;pas.System.TObject.$final.call(this)};this.CopyFrom=function(a){this._balanceAmount=a._balanceAmount;this._Account=a._Account};this.Destroy=
function(){this._Account=null;pas.System.TObject.Destroy.apply(this,arguments)}});rtl.createClass(a,"TDefaultProfitAcc",a.TAccountState,function(){this.$init=function(){a.TAccountState.$init.call(this);this._withdrawalFee=0};this.Create$1=function(a){this._returnRate=1;this._withdrawalFee=5;this._LimInf=100;this._LimSup=999.99};this.Deposit=function(a){this._balanceAmount+=a};this.Withdrawal=function(a){this._balanceAmount-=a+this._withdrawalFee};this.ApplyReturnRate=function(){this._balanceAmount+=
this._balanceAmount*this._returnRate/100}});rtl.createClass(a,"TLowProfitAcc",a.TDefaultProfitAcc,function(){this.$init=function(){a.TDefaultProfitAcc.$init.call(this);this._InterestFeeRate=0};this.Create$1=function(a){this._returnRate=0;this._InterestFeeRate=1;this._withdrawalFee=10;this._LimInf=-100;this._LimSup=99.99};this.Deposit=function(a){this._balanceAmount+=a};this.Withdrawal=function(b){var c=b+this._withdrawalFee;try{if(this._balanceAmount-c<this._LimInf)throw a.EWithdrawError.$create("Create$2",
[this._balanceAmount-c]);}catch(d){if(a.EWithdrawError.isPrototypeOf(d))window.console.log("Withdrawal can not be performed! Insufficient balance on the account. The balance: "+pas.SysUtils.FloatToStr(d.Fcurrent_balance));else throw d;}b=0;0>this._balanceAmount-c&&(b=(c-this._balanceAmount)*this._withdrawalFee/100);this._balanceAmount=this._balanceAmount-c-b};this.ApplyReturnRate=function(){}});rtl.createClass(a,"TGoldProfitAcc",a.TAccountState,function(){this.Create$1=function(a){this._returnRate=
2;this._LimInf=1E3;this._LimSup=99999.99};this.Deposit=function(a){this._balanceAmount+=a};this.Withdrawal=function(a){this._balanceAmount-=a};this.ApplyReturnRate=function(){this._balanceAmount+=this._balanceAmount*this._returnRate/100}})});rtl.module("math",["System","SysUtils"],function(){this.Ceil=function(a){return pas.System.Trunc(Math.ceil(a))}});rtl.module("uDOM","System Types Web JS Classes SysUtils".split(" "),function(){});
rtl.module("ubindElementAction","System Classes SysUtils Types JS Web uPromises uDOM".split(" "),function(){var a=this;rtl.createClass(a,"TBindEventPage",pas.System.TObject,function(){this.$init=function(){pas.System.TObject.$init.call(this);this.envelope=this.receipt=this.cashOut=this.loaderPG=this.cardOut=this.cardIn=null};this.$final=function(){this.envelope=this.receipt=this.cashOut=this.loaderPG=this.cardOut=this.cardIn=void 0;pas.System.TObject.$final.call(this)};this.onCancelClick=function(){pas.System.Writeln("onCancelClick");
(function(){var b=null;b=Promise.resolve(null);b.then(function(b){a.disableAllATMKeys();a.disableAllPages();return pas.uPromises.delay(10)}).then(function(a){window.Dom7("#p2js-page2b").removeClass("paused");window.Dom7("#p2js-page2b").removeClass("nm");rtl.getObject(window.Dom7("#p2js-page2b")["0"]).click();return pas.uPromises.delay(1E3)})})();a.smartLogoANI()};this.onCardInClick=function(){pas.System.Writeln("onCardInClick");window.console.log("card A clicked");a.disableAllPages();a.enableATMKey("2");
window.Dom7("#p2js-page2a").removeClass("paused")};this.onCardOutClick=function(){pas.System.Writeln("onCardOutClick");window.console.log("card B clicked");a.disableAllPages();rtl.getObject(window.Dom7("#p2js-page2b")["0"]).style.webkitAnimationName="ani-p2js-page2a-0";window.Dom7("#p2js-page2b").removeClass("paused");a.gotoPage("6")};this.onReceiptClick=function(){var a=null;pas.System.Writeln("onReceiptClick");window.Dom7("#p2js-page23").on("click",function(){var b=null;b=Promise.resolve(null);
b.then(function(a){window.console.log("restart CASH animation");this.style.webkitAnimation="none";return pas.uPromises.delay(10)}).then(function(b){a=this;a.style.webkitAnimation="";a.classList.add("nm");return pas.uPromises.delay(100)})},null)};this.onBeforePageInit=function(){this.PrefixedEvent(this.cardIn,"AnimationStart",function(){window.console.log("AnimationStart11111");window.Dom7(this).addClass("paused")});this.PrefixedEvent(this.cardIn,"AnimationEnd",function(){window.console.log("AnimationEndt11111");
a.gotoPage("24");rtl.getObject(window.Dom7("#p2js-page2b")["0"]).style.webkitAnimationName="ani-p2js-page2b-0"});this.PrefixedEvent(this.cardOut,"AnimationStart",function(){window.console.log("AnimationStart2222222222");window.Dom7(this).addClass("paused")});this.PrefixedEvent(this.cardOut,"AnimationEnd",function(){window.console.log("AnimationEnd card out");window.Dom7("#p2js-page1-2").removeClass("nm");a.gotoPage("24");rtl.getObject(window.Dom7("#p2js-page2b")["0"]).style.webkitAnimationName="ani-p2js-page2b-0"});
this.PrefixedEvent(this.cashOut,"AnimationStart",function(){window.console.log("AnimationStart cash");window.Dom7(this).addClass("paused")});this.PrefixedEvent(this.cashOut,"AnimationEnd",function(){window.console.log("AnimationStart cash")});this.PrefixedEvent(this.loaderPG,"AnimationStart",function(){window.console.log("Processing your request...");window.Dom7(this).addClass("paused")});this.PrefixedEvent(this.loaderPG,"AnimationEnd",function(){window.console.log("Processing your request...");window.Dom7(this).addClass("nm");
window.Dom7(this).addClass("paused")});this.PrefixedEvent(this.receipt,"AnimationStart",function(){window.console.log("take your receipt");window.Dom7(this).addClass("paused")});this.PrefixedEvent(this.receipt,"AnimationEnd",function(){window.console.log("take your receipt");window.Dom7(this).addClass("paused")});this.PrefixedEvent(this.envelope,"AnimationStart",function(){window.console.log("pulling the envelope");document.getElementById("p2js-page3a").classList.add("paused")});this.PrefixedEvent(this.envelope,
"AnimationEnd",function(){window.console.log("pulling the envelope")})};this.PrefixedEvent=function(a,c,d){var b=["webkit","moz","MS","o",""];for(var e=0,g=b.length;e<=g;e++){var h=e;b[h]||(c=c.toLowerCase());a.addEventListener(""+b[h]+c,d)}};this.bindEvents=function(){this.bindEvent(document.querySelector("#p2js-page1-2"),"click",rtl.createCallback(this,"onCancelClick"));this.bindEvent(document.querySelector("#p2js-page2a"),"click",rtl.createCallback(this,"onCardInClick"));this.bindEvent(document.querySelector("#p2js-page2b"),
"click",rtl.createCallback(this,"onCardOutClick"))};this.bindEvent=function(a,c,d){c=c.split(" ");if(a.addEventListener)for(var b=0,e=c.length-1;b<=e;b++){var g=b;a.addEventListener(c[g],d,!1)}else if(a.attachEvent)for(b=0,e=c.length-1;b<=e;b++)g=b,a.attachEvent("on"+c[g],d)};this.InitializeObject=function(){this.cardIn=document.getElementById("p2js-page2a");this.cardOut=document.getElementById("p2js-page2b");this.loaderPG=document.getElementById("p2js-page4");this.cashOut=document.getElementById("p2js-page5a");
this.receipt=document.getElementById("p2js-page23");this.envelope=document.getElementById("p2js-page3a");window.console.log("TBindEventPage.InitializeObject");this.onBeforePageInit();this.bindEvents();this.onReceiptClick();return null}});this.disableAllATMKeys=function(){var a;document.getElementById("p2js-page1-2").classList.add("nm");document.getElementById("p2js-page1-3").classList.add("nm");for(a=4;11>=a;a++){var c=document.getElementById("p2js-page1-"+pas.SysUtils.IntToStr(a));var d=c.cloneNode(!0);
d.classList.add("nm");c.parentNode.replaceChild(d,c)}};this.enableATMKey=function(a){window.Dom7("#p2js-page1-"+a).removeClass("nm")};this.disableAllPages=function(){var a;for(a=4;36>=a;a++)window.Dom7("#p2js-page"+pas.SysUtils.IntToStr(a)).addClass("nm")};this.gotoPage=function(b){a.disableAllPages();window.Dom7("#p2js-page"+b).removeClass("nm");pas.main.getPage();a.envelopeRestart()};this.envelopeRestart=function(){window.console.log("restart ENVELOPE animation");rtl.getObject(window.Dom7("#p2js-page3a")["0"]).style.webkitAnimation=
"none";window.setTimeout(function(){rtl.getObject(window.Dom7("#p2js-page3a")["0"]).style.webkitAnimation=""},10)};this.smartLogoANI=function(){(function(){var a=null;a=Promise.resolve(null);a.then(function(a){window.Dom7("#p2js-page1-1").addClass("nm");return pas.uPromises.delay(10)}).then(function(a){window.Dom7("#p2js-page1-1").removeClass("nm");return pas.uPromises.delay(10)})})()};this.startReceiptANI=function(){window.Dom7("#p2js-page23").removeClass("nm")};this.killENTER=function(){var a=document.getElementById("p2js-page1-3");
var c=a.cloneNode(!0);c.classList.add("nm");a.parentNode.replaceChild(c,a)}},["main"]);rtl.module("System.Color",["System","Classes","SysUtils"],function(){this.clGold=16766720;this.clHoneyDew=15794160;this.clRed=16711680});
rtl.module("uPages","System Classes SysUtils JS Web math ubindElementAction uPromises uAccount uDOM System.Color".split(" "),function(){var a=this.$impl;rtl.createClass(this,"TPage",pas.System.TObject,function(){this._ChequingAccount=this._SavingsAccount=null;this.showBalance=function(b,c){0!==this._SavingsAccount.getBalance()&&this._SavingsAccount.getBalance();this._SavingsAccount.ApplyReturnRate();var d='<font color="red">'+this._SavingsAccount.getAccountState().$classname+"</font>";var f=a.formatAmountValue(pas.SysUtils.FloatToStr(this._SavingsAccount.getBalance()));
var e=document.getElementById("nameTable");e=e.insertRow(e.rows.length);e.insertCell(0).innerHTML=(new Date).toLocaleTimeString();e.insertCell(1).innerHTML=b;e.insertCell(2).innerHTML=d;e.insertCell(3).innerHTML=f};this.withdrawalStartTransaction=function(b){var c=!1,d=0;if(null===this._SavingsAccount)return c;try{d=pas.SysUtils.StrToFloat(b);if(this._SavingsAccount.getBalance()<d||0>this._SavingsAccount.getBalance())throw pas.uAccount.EWithdrawError.$create("Create$2",[this._SavingsAccount.getBalance()]);
c=!0;this._SavingsAccount.Withdrawal(d);this.showBalance('<font color="red">-'+a.formatAmountValue(b)+"</font>",16711680)}catch(f){if(pas.uAccount.EWithdrawError.isPrototypeOf(f))window.console.log("The account has insufficient balance: $"+pas.SysUtils.FloatToStr(f._get_current_balance())),c=!1;else throw f;}return c};this.transferFunds=function(b,c,d){var f=!1;if(null===b)return f;try{if(b.getBalance()<d||0>b.getBalance())throw pas.uAccount.EWithdrawError.$create("Create$2",[b.getBalance()]);f=!0;
b.Withdrawal(d);c.Deposit(d);this.showBalance('<font color="green">-'+a.formatAmountValue(pas.SysUtils.FloatToStr(d))+"</font>",16711680)}catch(e){if(pas.uAccount.EWithdrawError.isPrototypeOf(e))window.console.log("The account has insufficient balance: $"+pas.SysUtils.FloatToStr(e._get_current_balance())),f=!1;else throw e;}return f};this.depositStartTransaction=function(b){var c=0;if(null!==this._SavingsAccount)try{c=pas.SysUtils.StrToFloat(b),this._SavingsAccount.Deposit(c),this.showBalance(a.formatAmountValue(b),
16711680)}catch(d){if(pas.SysUtils.Exception.isPrototypeOf(d))window.console.log(d.fMessage);else throw d;}};this.InitializeObject=function(){window.console.log("TPage.InitializeObject");this._SavingsAccount=pas.uAccount.TAccount.$create("Create$1",["warleyalex"]);this._ChequingAccount=pas.uAccount.TAccount.$create("Create$1",["warleyalex"]);this._SavingsAccount.setBalance(1E3);this._ChequingAccount.setBalance(300);return null};this.Page4=function(){a.ProcessLoaderAnimation()};this.Page5=function(){window.console.log("TELA 5")};
this.Page6=function(){window.console.log("TELA 6")};this.Page7=function(){window.console.log("TELA 7");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("9");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("11");window.Dom7("#p2js-page1-9").once("click",function(){window.console.log("Withdrawal");pas.ubindElementAction.gotoPage("9")},null);window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("Transfer");
pas.ubindElementAction.gotoPage("36")},null);window.Dom7("#p2js-page1-11").once("click",function(){window.console.log("Bill Payment");pas.ubindElementAction.gotoPage("35")},null);pas.ubindElementAction.enableATMKey("5");pas.ubindElementAction.enableATMKey("6");pas.ubindElementAction.enableATMKey("7");window.Dom7("#p2js-page1-5").once("click",function(){window.console.log("Deposit");pas.ubindElementAction.gotoPage("26")},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("Extract");
pas.ubindElementAction.gotoPage("27")},null);window.Dom7("#p2js-page1-7").once("click",function(){window.console.log("Account Balance");pas.ubindElementAction.gotoPage("22")},null)};this.Page8=function(){window.console.log("TELA 8");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");window.setTimeout(function(){pas.ubindElementAction.enableATMKey("9");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("11");pas.ubindElementAction.enableATMKey("5");
pas.ubindElementAction.enableATMKey("6");pas.ubindElementAction.enableATMKey("7")},1E3);window.Dom7("#p2js-page1-9").once("click",function(){window.console.log("$20");window.Dom7("#totalAmount").val("20");pas.ubindElementAction.gotoPage("14")},null);window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("$60");window.Dom7("#totalAmount").val("60");pas.ubindElementAction.gotoPage("14")},null);window.Dom7("#p2js-page1-11").once("click",function(){window.console.log("$100");window.Dom7("#totalAmount").val("100");
pas.ubindElementAction.gotoPage("14")},null);window.Dom7("#p2js-page1-5").once("click",function(){window.console.log("$140");window.Dom7("#totalAmount").val("140");pas.ubindElementAction.gotoPage("14")},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("$200");window.Dom7("#totalAmount").val("200");pas.ubindElementAction.gotoPage("14")},null);window.Dom7("#p2js-page1-7").once("click",function(){window.console.log("another amount");pas.ubindElementAction.gotoPage("11")},
null)};this.Page9=function(){var a=this;window.console.log("TELA 9");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("9");pas.ubindElementAction.enableATMKey("5");window.Dom7("#p2js-page1-9").once("click",function(){window.console.log("Savings");window.console.log("Savings account has: "+pas.SysUtils.FloatToStr(a._SavingsAccount.getBalance()));pas.ubindElementAction.gotoPage("10")},null);window.Dom7("#p2js-page1-5").once("click",
function(){window.console.log("Chequing");window.console.log("Checking account has: "+pas.SysUtils.FloatToStr(a._ChequingAccount.getBalance()))},null)};this.Page10=function(){window.console.log("TELA 10");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("11");pas.ubindElementAction.enableATMKey("7");window.Dom7("#p2js-page1-11").once("click",function(){window.console.log("I accept");pas.ubindElementAction.gotoPage("8")},null);
window.Dom7("#p2js-page1-7").once("click",function(){window.console.log("Cancel button");pas.ubindElementAction.gotoPage("18")},null)};this.Page11=function(){window.console.log("TELA 11");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("3");window.Dom7("#p2js-page1-3").once("click",function(){window.console.log("I accept, that is correct the amount.");var b=window.Dom7("#totalAmount").val();""!=b&&(!1===a.checkWithdrawalAmountMultiple20(Math.floor(b))?
pas.ubindElementAction.gotoPage("12"):pas.ubindElementAction.gotoPage("14"))},null)};this.Page12=function(){window.console.log("TELA 12");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES, I want another amount value");var b=window.Dom7("#totalAmount").val();window.Dom7("#totalAmount").val(a.roundWithdrawalAmount(Math.floor(b)));
pas.ubindElementAction.gotoPage("11")},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("No, that is all");pas.ubindElementAction.gotoPage("18")},null)};this.Page13=function(){window.console.log("TELA 13");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES, I want another amount value");
var b=window.Dom7("#totalAmount").val();window.Dom7("#totalAmount").val(a.roundWithdrawalAmount(Math.floor(b)));pas.ubindElementAction.gotoPage("11")},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("No, that is all");pas.ubindElementAction.gotoPage("18")},null)};this.Page14=function(){function b(){var a=null;a=Promise.resolve(null);a.then(function(a){pas.ubindElementAction.gotoPage("4");return pas.uPromises.delay(3E3)}).then(function(a){pas.ubindElementAction.gotoPage("15");
return pas.uPromises.delay(1E3)})}var c=this,d="";window.console.log("TELA 14");d=""+window.Dom7("#totalAmount").val();pas.ubindElementAction.killENTER();window.Dom7("#p2js-page14c").text("Amount: "+a.formatAmountValue(d));pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("3");pas.ubindElementAction.enableATMKey("7");window.Dom7("#p2js-page1-7").once("click",function(){window.console.log("hum, there are something wrong with the amount entered.");
pas.ubindElementAction.gotoPage("8")},null);window.Dom7("#p2js-page1-3").once("click",function(){window.console.log("I accept, that is correct the amount.");c.withdrawalStartTransaction(d);b()},null)};this.Page15=function(){function a(){var a=null;a=Promise.resolve(null);a.then(function(a){window.console.log("starting receipt");pas.ubindElementAction.gotoPage("17");return pas.uPromises.delay(1E3)}).then(function(a){window.console.log("going to screen 17");pas.ubindElementAction.startReceiptANI();
return pas.uPromises.delay(1E3)})}var c=null;window.console.log("TELA 15");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("3");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");(function(){var a=null;a=Promise.resolve(null);a.then(function(a){window.Dom7("#p2js-page5").removeClass("nm");window.Dom7("#p2js-page5a").removeClass("nm");window.console.log("first");return pas.uPromises.delay(1E3)}).then(function(a){window.console.log("second");
window.Dom7("#p2js-page5").removeClass("paused");window.Dom7("#p2js-page5a").removeClass("paused");return pas.uPromises.delay(1E3)})})();window.Dom7("#p2js-page5a").once("click",function(){window.console.log("restart CASH animation");c=this;this.style.webkitAnimation="none";window.setTimeout(function(){c.style.webkitAnimation="";window.Dom7("#p2js-page5a").addClass("nm")},10)},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("NO");pas.ubindElementAction.gotoPage("16")},
null);window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES");a()},null)};this.Page16=function(){window.console.log("TELA 16");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES, I want to do something else");pas.ubindElementAction.gotoPage("7")},null);window.Dom7("#p2js-page1-6").once("click",
function(){window.console.log("No, that is all");pas.ubindElementAction.gotoPage("18")},null)};this.Page17=function(){window.console.log("TELA 17");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES, I want to do something else");pas.ubindElementAction.gotoPage("7")},null);window.Dom7("#p2js-page1-6").once("click",
function(){window.console.log("No, that is all");pas.ubindElementAction.gotoPage("18")},null)};this.Page18=function(){window.console.log("TELA 18");window.setTimeout(function(){window.Dom7("#p2js-page1-2").click()},2E3)};this.Page19=function(){function a(){var a=null;a=Promise.resolve(null);a.then(function(a){window.console.log("starting receipt");pas.ubindElementAction.gotoPage("17");return pas.uPromises.delay(1E3)}).then(function(a){window.console.log("going to screen 17");pas.ubindElementAction.startReceiptANI();
return pas.uPromises.delay(1E3)})}window.console.log("TELA 19");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");pas.ubindElementAction.envelopeRestart();window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("NO");pas.ubindElementAction.gotoPage("16")},null);window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES");a()},null)};this.Page20=function(){function a(){var a=null;a=Promise.resolve(null);
a.then(function(a){d.style.webkitAnimation="";window.Dom7("#p2js-page3a").removeClass("paused");return pas.uPromises.delay(1E3)}).then(function(a){pas.ubindElementAction.gotoPage("4");return pas.uPromises.delay(2E3)}).then(function(a){pas.ubindElementAction.gotoPage("19");return pas.uPromises.delay(3E3)})}var c=this,d=null;window.console.log("TELA 20");pas.ubindElementAction.disableAllATMKeys();window.Dom7("#p2js-page3a").once("click",function(){window.console.log("restart CASH animation");c.depositStartTransaction(""+
window.Dom7("#totalDeposit").val());d=this;this.style.webkitAnimation="none";a()},null)};this.Page21=function(){window.console.log("TELA 21")};this.Page22=function(){function b(){var a=null;a=Promise.resolve(null);a.then(function(a){window.console.log("starting receipt");pas.ubindElementAction.gotoPage("17");return pas.uPromises.delay(1E3)}).then(function(a){window.console.log("going to screen 17");pas.ubindElementAction.startReceiptANI();return pas.uPromises.delay(1E3)})}window.console.log("TELA 22");
pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");pas.System.Writeln(this._SavingsAccount.getBalance());window.Dom7("#p2js-page22b").text(a.formatAmountValue(pas.SysUtils.FloatToStr(this._SavingsAccount.getBalance())));window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("NO");pas.ubindElementAction.gotoPage("16")},null);window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES");b()},
null)};this.Page23=function(){window.console.log("TELA 23")};this.Page24=function(){function a(){pas.ubindElementAction.gotoPage("25")}window.console.log("TELA 24");pas.ubindElementAction.enableATMKey("3");window.Dom7("#p2js-page1-3").once("click",function(){pas.main.getPage();pas.ubindElementAction.enableATMKey("6");pas.ubindElementAction.enableATMKey("10");"1234"===""+window.Dom7("#p2js-page24b input").val()?(window.console.log("correct PIN"),pas.ubindElementAction.gotoPage("7")):(window.console.log("incorrect PIN"),
window.setTimeout(a,10))},null)};this.Page25=function(){window.console.log("TELA 25");window.Dom7("#p2js-page1-10").once("click",function(a){a.preventDefault();window.console.log("L3");pas.ubindElementAction.gotoPage("24")},null);window.Dom7("#p2js-page1-6").once("click",function(a){a.preventDefault();window.console.log("R3");window.Dom7("#p2js-page1-2").click()},null)};this.Page26=function(){window.console.log("TELA 26");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");
pas.ubindElementAction.enableATMKey("3");window.Dom7("#p2js-page1-3").once("click",function(){window.console.log("Exactly, that is correct the amount.");pas.ubindElementAction.gotoPage("20")},null)};this.Page27=function(){window.console.log("TELA 27")};this.Page28=function(){window.console.log("TELA 28");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("9");pas.ubindElementAction.enableATMKey("5");pas.ubindElementAction.enableATMKey("6");
window.Dom7("#p2js-page1-9").once("click",function(){window.console.log("NET Company");pas.ubindElementAction.gotoPage("29")},null);window.Dom7("#p2js-page1-5").once("click",function(){window.console.log("OI Company");pas.ubindElementAction.gotoPage("29")},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("LIFE Company");pas.ubindElementAction.gotoPage("29")},null)};this.Page29=function(){function a(){var a=null;a=Promise.resolve(null);a.then(function(a){pas.ubindElementAction.gotoPage("4");
return pas.uPromises.delay(3E3)}).then(function(a){pas.ubindElementAction.gotoPage("30");return pas.uPromises.delay(1E3)})}var c=this;window.console.log("TELA 29");pas.ubindElementAction.killENTER();pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("3");window.Dom7("#p2js-page1-3").once("click",function(){window.console.log("I accept, that is correct the amount TO PAY.");var b=""+window.Dom7("#totalBill").val();""!==b&&(c.withdrawalStartTransaction(b),
a())},null)};this.Page30=function(){window.console.log("TELA 30");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");pas.ubindElementAction.startReceiptANI();window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES");pas.ubindElementAction.gotoPage("28")},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("NO");pas.ubindElementAction.gotoPage("16")},null)};this.Page31=function(){window.console.log("TELA 31");
pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("9");pas.ubindElementAction.enableATMKey("5");window.Dom7("#p2js-page1-9").once("click",function(){window.console.log("Savings not available")},null);window.Dom7("#p2js-page1-5").once("click",function(){window.console.log("Chequing");pas.ubindElementAction.gotoPage("32")},null)};this.Page32=function(){window.console.log("TELA 32");pas.ubindElementAction.killENTER();pas.ubindElementAction.disableAllATMKeys();
pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("3");window.Dom7("#p2js-page1-3").once("click",function(){window.console.log("I accept, that is correct the amount.");""!==""+window.Dom7("#totalTransfer").val()&&pas.ubindElementAction.gotoPage("33")},null)};this.Page33=function(){function a(){var a=null;a=Promise.resolve(null);a.then(function(a){pas.ubindElementAction.gotoPage("4");return pas.uPromises.delay(3E3)}).then(function(a){pas.ubindElementAction.gotoPage("34");
return pas.uPromises.delay(1E3)})}var c=this;window.console.log("TELA 33");window.Dom7("#p2js-billconfirm").text("Amount: $"+window.Dom7("#totalTransfer").val());pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("3");pas.ubindElementAction.enableATMKey("7");window.Dom7("#p2js-page1-7").once("click",function(){window.console.log("hum, there are something wrong with the amount entered.");pas.ubindElementAction.gotoPage("32")},null);
window.Dom7("#p2js-page1-3").once("click",function(){window.console.log("I accept, that is correct the amount.");var b=""+window.Dom7("#totalTransfer").val();!1!==c.transferFunds(c._SavingsAccount,c._ChequingAccount,pas.SysUtils.StrToFloat(b))&&(c.showBalance('<font color="blue">-'+b+"</font>",16711680),window.console.log("_ChequingAccount: "+pas.SysUtils.FloatToStr(c._ChequingAccount.getBalance())),window.console.log("_SavingsAccount: "+pas.SysUtils.FloatToStr(c._SavingsAccount.getBalance())),a())},
null)};this.Page34=function(){function a(){var a=null;a=Promise.resolve(null);a.then(function(a){window.console.log("starting receipt");pas.ubindElementAction.gotoPage("17");return pas.uPromises.delay(1E3)}).then(function(a){window.console.log("going to screen 17");pas.ubindElementAction.startReceiptANI();return pas.uPromises.delay(1E3)})}window.console.log("TELA 34");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("3");pas.ubindElementAction.enableATMKey("10");
pas.ubindElementAction.enableATMKey("6");window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("NO");pas.ubindElementAction.gotoPage("16")},null);window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("YES");a()},null)};this.Page35=function(){window.console.log("TELA 35");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");window.Dom7("#p2js-page1-10").once("click",
function(){window.console.log("Savings");pas.ubindElementAction.gotoPage("28")},null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("Chequing")},null)};this.Page36=function(){window.console.log("TELA 36");pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.enableATMKey("2");pas.ubindElementAction.enableATMKey("10");pas.ubindElementAction.enableATMKey("6");window.Dom7("#p2js-page1-10").once("click",function(){window.console.log("Savings");pas.ubindElementAction.gotoPage("31")},
null);window.Dom7("#p2js-page1-6").once("click",function(){window.console.log("Chequing option is unavailable")},null)}})},["main"],function(){var a=this.$impl;a.roundWithdrawalAmount=function(a){return 20*pas.math.Ceil(a/20)};a.checkWithdrawalAmountMultiple20=function(a){return 0===a%20?!0:!1};a.formatAmountValue=function(a){return"$"+parseFloat(a).toFixed(2)};a.ProcessLoaderAnimation=function(){var a=null;a=Promise.resolve(null);a.then(function(a){window.console.log("Please wait more 20ms");window.Dom7("#p2js-page4").removeClass("nm");
return pas.uPromises.delay(20)}).then(function(a){window.console.log("wait only more 10ms");window.Dom7("#p2js-page4").removeClass("paused");return pas.uPromises.delay(10)})}});
rtl.module("main","System Classes SysUtils JS Web uPromises uAccount uPages".split(" "),function(){var a=this.$impl;rtl.createClass(this,"TApplication",pas.System.TObject,function(){this.InitApp=function(){pas.System.Writeln("starting InitApp.");document.getElementById("p2js-an-scene-0").setAttribute("class","run t-0");pas.ubindElementAction.disableAllPages();pas.ubindElementAction.disableAllATMKeys();pas.ubindElementAction.smartLogoANI();pas.ubindElementAction.gotoPage("6")};this.RunApp=function(){pas.uPages.TPage.InitializeObject();
pas.ubindElementAction.TBindEventPage.$create("Create").InitializeObject();this.InitApp()}});this.getPage=function(){var b=a.getActualScreen();"p2js-page4"===b?pas.uPages.TPage.Page4():"p2js-page5"===b?pas.uPages.TPage.Page5():"p2js-page6"===b?pas.uPages.TPage.Page6():"p2js-page7"===b?pas.uPages.TPage.Page7():"p2js-page8"===b?pas.uPages.TPage.Page8():"p2js-page9"===b?pas.uPages.TPage.Page9():"p2js-page10"===b?pas.uPages.TPage.Page10():"p2js-page11"===b?pas.uPages.TPage.Page11():"p2js-page12"===b?
pas.uPages.TPage.Page12():"p2js-page13"===b?pas.uPages.TPage.Page13():"p2js-page14"===b?pas.uPages.TPage.Page14():"p2js-page15"===b?pas.uPages.TPage.Page15():"p2js-page16"===b?pas.uPages.TPage.Page16():"p2js-page17"===b?pas.uPages.TPage.Page17():"p2js-page18"===b?pas.uPages.TPage.Page18():"p2js-page19"===b?pas.uPages.TPage.Page19():"p2js-page20"===b?pas.uPages.TPage.Page20():"p2js-page21"===b?pas.uPages.TPage.Page21():"p2js-page22"===b?pas.uPages.TPage.Page22():"p2js-page23"===b?pas.uPages.TPage.Page23():
"p2js-page24"===b?pas.uPages.TPage.Page24():"p2js-page25"===b?pas.uPages.TPage.Page25():"p2js-page26"===b?pas.uPages.TPage.Page26():"p2js-page27"===b?pas.uPages.TPage.Page27():"p2js-page28"===b?pas.uPages.TPage.Page28():"p2js-page29"===b?pas.uPages.TPage.Page29():"p2js-page30"===b?pas.uPages.TPage.Page30():"p2js-page31"===b?pas.uPages.TPage.Page31():"p2js-page32"===b?pas.uPages.TPage.Page32():"p2js-page33"===b?pas.uPages.TPage.Page33():"p2js-page34"===b?pas.uPages.TPage.Page34():"p2js-page35"===b?
pas.uPages.TPage.Page35():"p2js-page36"===b&&pas.uPages.TPage.Page36()}},["ubindElementAction"],function(){this.$impl.getActualScreen=function(){return null!=document.querySelector(".tela:not(.nm)")?document.querySelector(".tela:not(.nm)").id:""}});
rtl.module("program","System JS Classes SysUtils Web main uAccount uPages ubindElementAction".split(" "),function(){var a=this;this.Application=null;a.$main=function(){try{a.Application=pas.main.TApplication.$create("Create"),a.Application.RunApp()}catch(b){if(pas.SysUtils.Exception.isPrototypeOf(b))window.console.log(b.fMessage);else throw b;}}});